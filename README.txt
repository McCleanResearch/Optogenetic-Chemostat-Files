December 01, 2016
Cameron Stewart, cstewart7@wisc.edu
Research Technician at UW-Madison
Principal Investigator: Megan McClean, mmcclean@wisc.edu
Lab website: http://mccleanlab.bme.wisc.edu

-----------------------------------------------------------------------
RELATED ARTICLE:
Stewart, C., McClean, M. N. Design and Implementation of an Automated 
Illuminating, Culturing, and Sampling System for Microbial Optogenetic 
Applications. J. Vis. Exp. (), e54894, doi:10.3791/54894 (2016).

--------------------------------------------------------------------------------------
SUMMARY: This repository contains files for creating a continuous culturing apparatus
for the purpose of studying the effects of light exposure on cultured microbes
by microscopy. At a high level: The user will use "Micro-Manager" to control a
microscope, FIJI to analyze the images, an arduino microcontroller to control
peristaltic pumps and a heating pad, and the "Bioreactor_Controller" plugin of MicroManager
 to coordinate these activities.
---------------------------------------------------------------------------------------
-The "Bioreactor_Controller.jar" file is the heart of this kit. It should be
copied into the Fiji/mmplugins folder AND ALSO into the Fiji/plugins folder. This 
controls the microscope, performs the image analysis (or calls an optional Beanshell 
script to perform the image analysis), sends parameters to the microcontroller which 
regulates power to the peristaltic pumps and heating pad of the continuous culturing 
vessel, and it can call external scripts for supplementary analysis or feedback control.

	--To use this to control a bioreactor and microscope, configure micromanager as a Fiji
	plugin (see the extensive manual for verbose instructions). From there, you should be able
	to use it as demonstrated in this (rather dull) video: https://www.youtube.com/watch?v=FP84-2O_o3E

	--To use "Bioreactor_Controller.jar" to retrospectively analyze images, call the plugin from
	Fiji>Plugins>McCleanLab Analyze Bioreactor Images. You should be able to use it as demonstrated in
	this video: https://www.youtube.com/watch?v=LyaSNZRGDJk    Note that the images were collected
	from an experiment. To get images in a virtual stack (for when there are too many for the RAM), 
	I recommend copying them into a folder, and then opening them as a virtual stack via
	Fiji>File>Import>Image Sequence.

	--To use the "Bioreactor_Controller.jar" to plot image analysis results, call the plugin from
	Fiji>Plugins>McCleanLab Plot Bioreactor Results.You should be able to use it as demonstrated here:
	https://youtu.be/8iOyvxAbDik   Note that the beginning of the video displays the CSV values that were
	generated by the aforementioned image analysis plugin and later plotted. Also note that this plugin requires
	JHeatChart.jar to be in the Fiji/Jars folder.

-The "extensive_lab_manual....docx" document in this repository is intended to describe
all of the steps needed to build this, and useful figures along the way. It is a verbose
version of the paper:
Stewart, C., McClean, M. N. Design and Implementation of an Automated 
Illuminating, Culturing, and Sampling System for Microbial Optogenetic 
Applications. J. Vis. Exp. (), e54894, doi:10.3791/54894 (2016).
Improvements and troubleshooting tips, especially with regard to
the software, will be listed here.

-The ".fzz" file contains the design for a printed circuit board that can be stacked 
on an Arduino microcontroller and be used to regulate power to external devices, read
inputs from an external thermometer, and control an LED matrix. To build the apparatus
described in the manual, the reader will need to order a circuit board with this
design. It can be opened with the Fritzing software which is free and open-source.
An additional use for this, besides ordering the board, is that the user can inspect
the connections in the PCB and/or modify it for another purpose.


-The "microcontroller_code" folder contains code that should be uploaded to the
microcontroller and its own "readme"

-The "bioreactorTimecourse.csv" file contains a 3 columns of values. The first
is a column of time values. The second is a column of the number of LEDs of the 
LED matrix that should be on (0-64), and the third is the pulse-width-modulated
intensity of those LEDs (0-255). Together, they dictate how the microcontroller
control the LED matrix over time. It is not necessary, but it may be useful to
use this file instead of manually entering these values into the "bioreactorController"
plugin.

-The "supplementary_scripts" folder contains Beanshell (a java-like language) scripts
that can be used in place of the plugin. The downside of using these scripts is that they
may not be synchronized with the plugin code. The benefit of using them is that they can
be easily customized in the beanshell script editor.
